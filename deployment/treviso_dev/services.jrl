p({
  "class":"foam.nanos.boot.NSpec",
  "name":"appConfig",
  "lazy":false,
  "parameters":false,
  "service": {
    "class":"foam.nanos.app.AppConfig",
    "privacyUrl":"/service/file/d6a408c6-587d-b00f-6e04-6a4b933f7495",
    "copyright":"Copyright Â© 2017-@{currentYear} nanopay Corp. All rights reserved.",
    "termsAndCondLink":"/service/file/1f406b9b-bde4-58ff-f171-657627581f61",
    "url":"https://treviso.development.nanopay.net",
    "mode":0
  }
})

// This is a deployment step.
p({
  class: "foam.nanos.boot.NSpec",
  name: "emailConfig",
  lazy: true,
  service: null,
  serviceScript: """
    import foam.mlang.predicate.ContextUserPredicate;
    import foam.nanos.auth.User;
    import foam.mlang.MLang;

    emailConfig = new foam.nanos.boot.AltFactory("nanopayEmailConfig");
    emailConfig.addDelegate(new ContextUserPredicate(MLang.EQ(User.SPID, "nanopay")), "nanopayEmailConfig");
    emailConfig.addDelegate(new ContextUserPredicate(MLang.EQ(User.SPID, "treviso")), "trevisoEmailConfig");
    return emailConfig;
  """
})

p({
  "class":"foam.nanos.boot.NSpec",
  "name":"SoaWebServiceCredientials",
  "lazy":false,
  "service": {
    "class":"net.nanopay.partner.soawebservices.SoaCredenciais",
    "Email":"suporte@trevisocc.com.br",
    "Senha":"auFHK3STb",
    "url":"http://www.soawebservices.com.br/restservices/producao/cdc/"
  }
})

p({
  "class":"foam.nanos.boot.NSpec",
  "name":"exchangeCredential",
  "lazy":false,
  "service":
    {
      "class":"net.nanopay.country.br.exchange.ExchangeCredential",
      exchangeUrl:"http://10.11.9.148:8383/Exchange.svc",
      exchangeAgencia:51,
      exchangeUsername:"140",
      exchangePassword:"120434"
    }
})

p({
  "class":"foam.nanos.boot.NSpec",
  "name":"trevisoCredientials",
  "lazy":false,
  "service":
    {
      "class":"net.nanopay.partner.treviso.TrevisoCredientials",
      fepWebUsername:"trevisocc",
      fepWebPassword:"Treviso4321#@!",
      fepWebApi:"https://client-uat.fepweb.com.br/fepwebws/api/",
      fepWebCode:"100001",
      fepWebCodeName:"Treviso Matriz - Nanopay"
    }
})

p({
  "class":"foam.nanos.boot.NSpec",
  "name":"trevisoService",
  "lazy":false,
  "serve":true,
  "serviceScript":"""
    import net.nanopay.country.br.exchange.*;

    // Set exchange limit ($20000.00 USD)
    EXCHANGE_LIMIT = 2000000L;
    UTILIZED_LIMIT = 1000L;

    mockExchange = new ExchangeClientMock(x);
    mockExchange.getStubSearchTitularCapFin().setSearchTitularCapFinResult(
      new ResponseTitular.Builder(x)
        .setServiceStatus(new ServiceStatus.Builder(x).setCODRETORNO(0).build())
        .setTitular(new Titular.Builder(x).setLIMITEOP(EXCHANGE_LIMIT).setUTILIZADO(UTILIZED_LIMIT).build())
        .build()
    );
    return new net.nanopay.partner.treviso.TrevisoService(x, x.get("fepWebService"), mockExchange);
  """
})
p({
  "class":"foam.nanos.boot.NSpec",
  "name":"exchange",
  "lazy":false,
  "serve":true,
  "serviceScript":"""
    import net.nanopay.country.br.exchange.*;

    // Set exchange limit ($20000.00 USD)
    EXCHANGE_LIMIT = 2000000L;

    mockExchange = new ExchangeClientMock(x);
    mockExchange.getStubSearchTitular().setSearchTitularResult(
      new ResponseTitular.Builder(x)
        .setServiceStatus(new ServiceStatus.Builder(x).setCODRETORNO(0).build())
        .setTitular(new Titular.Builder(x).setLIMITEOP(EXCHANGE_LIMIT).build())
        .build()
    );
    return mockExchange;
  """
})

p({
  "class":"foam.nanos.boot.NSpec",
  "name":"soaWebService",
  "lazy":false,
  "serve":true,
  "serviceScript":"""
    return new net.nanopay.partner.soawebservices.SoaWebServiceClientMock(x);
  """
})
