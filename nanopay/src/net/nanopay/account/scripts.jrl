p({"class":"foam.nanos.script.Script","id":"CreateAbliiOverdraftAccounts","code":"import net.nanopay.account.DigitalAccount;\nimport net.nanopay.account.OverdraftAccount;\nimport net.nanopay.account.DebtAccount;\nimport net.nanopay.account.DigitalAccountService;\nimport foam.nanos.auth.User;\nimport foam.nanos.auth.Group;\nimport foam.mlang.MLang;\n\nclearing = 6L; // nanopay Clearing Account\ns = x.get(\"digitalAccount\");\nd = x.get(\"businessDAO\");\na = x.get(\"accountDAO\");\nbusinesses = d.select().array;\nprint(\"businesses: \"+businesses.size());\nfor ( b : businesses ) {\no = s.findDefault(x, b, null).fclone();\no.setName(b.getGroup());\no = a.put(o);\nprint(o.type+\" \"+o);\nprint(o.debtAccount);\nt = o.findDebtAccount(x).fclone();\nprint(t.type+\" \"+t);\nt.setCreditorAccount(clearing);\nt = a.put(t);\n}\n"})
