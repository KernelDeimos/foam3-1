p({"class":"foam.nanos.test.Test","id":"password hashing","description":"testing password hashing dao","server":true,"scheduled":false,"code":"auth = x.get(\"auth\");\nuserDAO = x.get(\"userDAO\");\nuserDAO.removeAll();\n\n// test password hashing\nuser = new foam.nanos.auth.User();\nuser.setFirstName(\"Test\");\nuser.setLastName(\"MintChip\");\nuser.setEmail(\"test@nanopay.net\");\nuser.setPassword(\"Mintchip123\");\nresult = userDAO.put(user);\n\ntest(foam.util.SafetyUtil.isEmpty(result.getPassword()), \"password not returned following first put\");\ntest(auth.loginByEmail(x, \"test@nanopay.net\", \"Mintchip123\") != null, \"login using email and password\");\n\nresult.setPassword(\"Mintchip124\");\nresult2 = userDAO.put(result);\n\ntry {\ntest(foam.util.SafetyUtil.isEmpty(result2.getPassword()), \"password not returned following second put\");\nauth.loginByEmail(x, \"test@nanopay.net\", \"Mintchip124\");\n} catch (Throwable t) {\ntest(t.getMessage() == \"Invalid password\", \"password not updated\");\n}"})
p({"class":"foam.nanos.test.Test","id":"test email template","id":"test email template","description":"tests email template","lastRun":"2017-10-13T20:52:59.386Z","server":true,"scheduled":false,"code":"email = x.get(\"email\");\nemail.setUsername(\"nanopay.email@gmail.com\");\nemail.setPassword(\"smt5s3ndr\");\n\nmessage = new foam.nanos.notification.email.EmailMessage();\nmessage.setFrom(\"info@nanopay.net\");\nmessage.setReplyTo(\"noreply@nanopay.net\");\nmessage.setTo(new String[] { \"\" });\nmessage.setSubject(\"test\");\n\nmap = new java.util.HashMap();\nmap.put(\"company\", \"nanoPay Corporation\");\n\ntest(email.sendEmailFromTemplate(message, \"base-footer\", map), \"email template test\");","notes":""})
